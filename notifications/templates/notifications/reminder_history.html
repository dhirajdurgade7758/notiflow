{% extends "notifications/base.html" %}

{% block content %}
<div class="container mt-4">
  <h2>📜 Reminder History</h2>
  <div class="mb-3">
  <a href="?status=sent" class="btn btn-sm btn-outline-success">Sent</a>
  <a href="?status=failed" class="btn btn-sm btn-outline-danger">Failed</a>
  <a href="?status=cancelled" class="btn btn-sm btn-outline-secondary">Cancelled</a>
</div>

  <hr>

  {% if history %}
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th>Title</th>
          <th>Message</th>
          <th>Sent At</th>
          <th>Status</th>
          <th>Repeat</th>
        </tr>
      </thead>
      <tbody>
        {% for r in history %}
        <tr>
          <td>{{ r.title }}</td>
          <td>{{ r.message|truncatechars:60 }}</td>
          <td>{{ r.send_at|date:"Y-m-d H:i" }}</td>
          <td>
            <span class="badge bg-{{ r.status|yesno:'success,danger,secondary,warning' }}">{{ r.status|capfirst }}</span>
          </td>
          <td>{{ r.get_repeat_display }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p class="text-muted">No reminder history yet.</p>
  {% endif %}

  <div class="mt-3">
    <a href="{% url 'user_dashboard' %}" class="btn btn-secondary">← Back to Dashboard</a>
  </div>
</div>
{% endblock %}
